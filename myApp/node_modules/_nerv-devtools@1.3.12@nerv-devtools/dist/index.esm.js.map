{"version":3,"file":"index.esm.js","sources":["../../nerv-shared/dist/index.js","../src/devtools.ts","../src/index.ts"],"sourcesContent":["const EMPTY_CHILDREN = [];\r\nconst EMPTY_OBJ = {};\r\nfunction isNullOrUndef(o) {\r\n    return o === undefined || o === null;\r\n}\r\nfunction isInvalid(o) {\r\n    return isNullOrUndef(o) || o === true || o === false;\r\n}\r\nfunction isVNode(node) {\r\n    return !isNullOrUndef(node) && node.vtype === 2 /* Node */;\r\n}\r\nfunction isVText(node) {\r\n    return !isNullOrUndef(node) && node.vtype === 1 /* Text */;\r\n}\r\nfunction isComponent(instance) {\r\n    return !isInvalid(instance) && instance.isReactComponent === EMPTY_OBJ;\r\n}\r\nfunction isWidget(node) {\r\n    return (!isNullOrUndef(node) &&\r\n        (node.vtype & (4 /* Composite */ | 8 /* Stateless */)) > 0);\r\n}\r\nfunction isPortal(vtype, node) {\r\n    return (vtype & 32 /* Portal */) > 0;\r\n}\r\nfunction isComposite(node) {\r\n    return !isNullOrUndef(node) && node.vtype === 4 /* Composite */;\r\n}\r\nfunction isStateless(node) {\r\n    return !isNullOrUndef(node) && node.vtype === 8 /* Stateless */;\r\n}\r\nfunction isValidElement(node) {\r\n    return !isNullOrUndef(node) && node.vtype;\r\n}\r\nfunction isHook(arg) {\r\n    return !isNullOrUndef(arg) && typeof arg.vhook === 'number';\r\n}\r\n// tslint:disable-next-line:no-empty\r\nfunction noop() { }\r\n// typescript will compile the enum's value for us.\r\n// eg.\r\n// Composite = 1 << 2  => Composite = 4\r\nvar VType;\r\n(function (VType) {\r\n    VType[VType[\"Text\"] = 1] = \"Text\";\r\n    VType[VType[\"Node\"] = 2] = \"Node\";\r\n    VType[VType[\"Composite\"] = 4] = \"Composite\";\r\n    VType[VType[\"Stateless\"] = 8] = \"Stateless\";\r\n    VType[VType[\"Void\"] = 16] = \"Void\";\r\n    VType[VType[\"Portal\"] = 32] = \"Portal\";\r\n})(VType || (VType = {}));\n\nexport { EMPTY_CHILDREN, EMPTY_OBJ, isNullOrUndef, isInvalid, isVNode, isVText, isComponent, isWidget, isPortal, isComposite, isStateless, isValidElement, isHook, noop, VType };\n//# sourceMappingURL=index.js.map\n","// tslint:disable-next-line:no-var-requires\nimport { options, findDOMNode } from 'nervjs'\nimport {\n  isComposite,\n  isWidget,\n  isVText,\n  isValidElement,\n  isStateless,\n  isNullOrUndef\n} from 'nerv-shared'\nconst isArray = Array.isArray\n/**\n * Return a ReactElement-compatible object for the current state of a Nerv\n * component.\n */\nfunction createReactElement (component) {\n  return {\n    type: component.type,\n    key: component.key,\n    ref: null,\n    props: component.props\n  }\n}\n\nfunction normalizeChildren (children) {\n  if (isArray(children)) {\n    return children.filter(isValidElement).map(updateReactComponent)\n  } else {\n    return isValidElement(children) ? [updateReactComponent(children)] : []\n  }\n}\n\n/**\n * Create a ReactDOMComponent-compatible object for a given DOM node rendered\n * by Nerv.\n *\n * This implements the subset of the ReactDOMComponent interface that\n * React DevTools requires in order to display DOM nodes in the inspector with\n * the correct type and properties.\n *\n * @param {Node} node\n */\nfunction createReactDOMComponent (vnode) {\n  if (isNullOrUndef(vnode)) {\n    return {}\n  }\n  const isText = isVText(vnode)\n\n  return {\n    // --- ReactDOMComponent interface\n    _currentElement: isText\n      ? vnode.text\n      : {\n          type: vnode.type,\n          props: normalizeProps(vnode.props)\n        },\n    _renderedChildren: normalizeChildren(vnode.children),\n    _stringText: isText ? vnode.text : null,\n\n    // --- Additional properties used by Nerv devtools\n\n    // A flag indicating whether the devtools have been notified about the\n    // existence of this component instance yet.\n    // This is used to send the appropriate notifications when DOM components\n    // are added or updated between composite component updates.\n    _inDevTools: false,\n    node: !isText ? findDOMNode(vnode) : null\n  }\n}\n\n/**\n * Return the name of a component created by a `ReactElement`-like object.\n *\n * @param {ReactElement} element\n */\nfunction typeName (element) {\n  if (typeof element.type === 'function') {\n    return element.type.displayName || element.type.name\n  }\n  return element.type\n}\n\nfunction normalizeProps (_props) {\n  const props = { ..._props }\n  delete props.owner\n  return props\n}\n\n/**\n * Return a ReactCompositeComponent-compatible object for a given Nerv\n * component instance.\n *\n * This implements the subset of the ReactCompositeComponent interface that\n * the DevTools requires in order to walk the component tree and inspect the\n * component's properties.\n *\n * See https://github.com/facebook/react-devtools/blob/e31ec5825342eda570acfc9bcb43a44258fceb28/backend/getData.js\n */\nfunction createReactCompositeComponent (vnode) {\n  const isCompositeComponent = isComposite(vnode)\n  const _currentElement = createReactElement(vnode)\n  const component = isCompositeComponent ? vnode.component : vnode\n  const node = findDOMNode(vnode)\n\n  const instance: any = {\n    // --- ReactDOMComponent properties\n    getName () {\n      return typeName(_currentElement)\n    },\n    _currentElement,\n    props: normalizeProps(component.props),\n    state: component.state,\n    forceUpdate: component.forceUpdate && component.forceUpdate.bind(component),\n    setState: component.setState && component.setState.bind(component),\n\n    // --- Additional properties used by Nerv devtools\n    node,\n    vnode\n  }\n\n  // React DevTools exposes the `_instance` field of the selected item in the\n  // component tree as `$r` in the console.  `_instance` must refer to a\n  // React Component (or compatible) class instance with `props` and `state`\n  // fields and `setState()`, `forceUpdate()` methods.\n  instance._instance = component\n\n  // If the root node returned by this component instance's render function\n  // was itself a composite component, there will be a `_component` property\n  // containing the child component instance.\n  // Otherwise, if the render() function returned an HTML/SVG element,\n  // create a ReactDOMComponent-like object for the DOM node itself.\n  instance._renderedComponent = updateReactComponent(component._rendered)\n  return instance\n}\n\n/**\n * Map of Component|Node to ReactDOMComponent|ReactCompositeComponent-like\n * object.\n *\n * The same React*Component instance must be used when notifying devtools\n * about the initial mount of a component and subsequent updates.\n */\nconst instanceMap = new Map()\n\n/**\n * Update (and create if necessary) the ReactDOMComponent|ReactCompositeComponent-like\n * instance for a given Nerv component instance or DOM Node.\n *\n * @param {Component|Node} componentOrNode\n */\nfunction updateReactComponent (vnode) {\n  const newInstance = !isWidget(vnode)\n    ? createReactDOMComponent(vnode)\n    : createReactCompositeComponent(vnode)\n  const oldInst = getInstanceFromVNode(vnode)\n  if (oldInst) {\n    Object.assign(oldInst, newInstance)\n    return oldInst\n  }\n  instanceMap.set(getKeyForVNode(vnode), newInstance)\n  return newInstance\n}\n\nfunction nextRootKey (roots) {\n  return '.' + Object.keys(roots).length\n}\n\nfunction getKeyForVNode (vnode) {\n  if (isComposite(vnode)) {\n    return vnode.component\n  } else if (isStateless(vnode)) {\n    return vnode.type\n  } else if (vnode && vnode.vtype) {\n    return findDOMNode(vnode)\n  }\n}\n\nfunction getInstanceFromVNode (vnode) {\n  const key = getKeyForVNode(vnode)\n  return instanceMap.get(key)\n}\n\n/**\n * Find all root component instances rendered by Nerv in `node`'s children\n * and add them to the `roots` map.\n *\n * @param {DOMElement} node\n * @param {[key: string] => ReactDOMComponent|ReactCompositeComponent}\n */\nfunction findRoots (node, roots) {\n  options.roots.forEach((root) => {\n    roots[nextRootKey(roots)] = updateReactComponent(root)\n  })\n}\n\nfunction findVNodeFromDom (vnode, dom) {\n  if (!vnode) {\n    const roots = options.roots\n    for (let i = 0, len = roots.length; i < len; i++) {\n      const root = roots[i]\n      const result = findVNodeFromDom(root, dom)\n\n      if (result) {\n        return result\n      }\n    }\n  } else {\n    if (\n      findDOMNode(vnode) === dom\n    ) {\n      return vnode\n    }\n    if (isWidget(vnode)) {\n      const children = vnode._rendered\n      if (children) {\n        if (isArray(children)) {\n          children.forEach((child) => {\n            if (child) {\n              const result = findVNodeFromDom(child, dom)\n              if (result) {\n                return result\n              }\n            }\n          })\n        } else {\n          const result = findVNodeFromDom(children, dom)\n          if (result) {\n            return result\n          }\n        }\n      }\n    }\n  }\n}\n\n/**\n * Create a bridge for exposing Nerv's component tree to React DevTools.\n *\n * It creates implementations of the interfaces that ReactDOM passes to\n * devtools to enable it to query the component tree and hook into component\n * updates.\n *\n * See https://github.com/facebook/react/blob/59ff7749eda0cd858d5ee568315bcba1be75a1ca/src/renderers/dom/ReactDOM.js\n * for how ReactDOM exports its internals for use by the devtools and\n * the `attachRenderer()` function in\n * https://github.com/facebook/react-devtools/blob/e31ec5825342eda570acfc9bcb43a44258fceb28/backend/attachRenderer.js\n * for how the devtools consumes the resulting objects.\n */\nfunction createDevToolsBridge () {\n  // The devtools has different paths for interacting with the renderers from\n  // React Native, legacy React DOM and current React DOM.\n  //\n  // Here we emulate the interface for the current React DOM (v15+) lib.\n\n  // ReactDOMComponentTree-like object\n  const ComponentTree = {\n    getNodeFromInstance (instance) {\n      return instance.node\n    },\n    getClosestInstanceFromNode (dom) {\n      const vnode = findVNodeFromDom(null, dom)\n      return vnode ? updateReactComponent(vnode) : null\n    }\n  }\n\n  // Map of root ID (the ID is unimportant) to component instance.\n  const roots = {}\n  findRoots(document.body, roots)\n\n  // ReactMount-like object\n  //\n  // Used by devtools to discover the list of root component instances and get\n  // notified when new root components are rendered.\n  const Mount: any = {\n    _instancesByReactRootID: roots,\n\n    // Stub - React DevTools expects to find this method and replace it\n    // with a wrapper in order to observe new root components being added\n    // tslint:disable-next-line:no-empty\n    _renderNewRootComponent (/* instance, ... */) {}\n  }\n\n  // ReactReconciler-like object\n  const Reconciler: any = {\n    // Stubs - React DevTools expects to find these methods and replace them\n    // with wrappers in order to observe components being mounted, updated and\n    // unmounted\n    // tslint:disable-next-line:no-empty\n    mountComponent (/* instance, ... */) {},\n    // tslint:disable-next-line:no-empty\n    performUpdateIfNecessary (/* instance, ... */) {},\n    // tslint:disable-next-line:no-empty\n    receiveComponent (/* instance, ... */) {},\n    // tslint:disable-next-line:no-empty\n    unmountComponent (/* instance, ... */) {}\n  }\n\n  function isEqual (a) {\n    return (b) => a === b\n  }\n\n  function isRoot (vnode) {\n    return options.roots.some(isEqual(vnode))\n  }\n\n  /** Notify devtools that a new component instance has been mounted into the DOM. */\n  const componentAdded = (vnode) => {\n    const instance = updateReactComponent(vnode)\n\n    // if is root component\n    if (isRoot(vnode)) {\n      instance._rootID = nextRootKey(roots)\n      roots[instance._rootID] = instance\n      Mount._renderNewRootComponent(instance)\n    }\n    visitNonCompositeChildren(instance, (childInst) => {\n      childInst._inDevTools = true\n      Reconciler.mountComponent(childInst)\n    })\n    Reconciler.mountComponent(instance)\n  }\n\n  /** Notify devtools that a component has been updated with new props/state. */\n  const componentUpdated = (component) => {\n    const prevRenderedChildren: any[] = []\n    visitNonCompositeChildren(getInstanceFromVNode(component), (childInst) => {\n      prevRenderedChildren.push(childInst)\n    })\n\n    // Notify devtools about updates to this component and any non-composite\n    // children\n    const instance = updateReactComponent(component)\n    Reconciler.receiveComponent(instance)\n    visitNonCompositeChildren(instance, (childInst) => {\n      if (!childInst._inDevTools) {\n        // New DOM child component\n        childInst._inDevTools = true\n        Reconciler.mountComponent(childInst)\n      } else {\n        // Updated DOM child component\n        Reconciler.receiveComponent(childInst)\n      }\n    })\n\n    // For any non-composite children that were removed by the latest render,\n    // remove the corresponding ReactDOMComponent-like instances and notify\n    // the devtools\n    prevRenderedChildren.forEach((childInst) => {\n      if (!document.body.contains(childInst.node)) {\n        instanceMap.delete(getKeyForVNode(childInst.vnode))\n        Reconciler.unmountComponent(childInst)\n      }\n    })\n  }\n\n  /** Notify devtools that a component has been unmounted from the DOM. */\n  const componentRemoved = (component) => {\n    const instance = updateReactComponent(component)\n    visitNonCompositeChildren((childInst) => {\n      instanceMap.delete(childInst.node)\n      Reconciler.unmountComponent(childInst)\n    })\n    Reconciler.unmountComponent(instance)\n    instanceMap.delete(component)\n    if (instance._rootID) {\n      delete roots[instance._rootID]\n    }\n  }\n\n  return {\n    componentAdded,\n    componentUpdated,\n    componentRemoved,\n\n    // Interfaces passed to devtools via __REACT_DEVTOOLS_GLOBAL_HOOK__.inject()\n    ComponentTree,\n    Mount,\n    Reconciler\n  }\n}\n\n/**\n * Visit all child instances of a ReactCompositeComponent-like object that are\n * not composite components (ie. they represent DOM elements or text)\n *\n * @param {Component} component\n * @param {(Component) => void} visitor\n */\nfunction visitNonCompositeChildren (component, visitor?) {\n  if (component._renderedComponent) {\n    visitor(component._renderedComponent)\n    visitNonCompositeChildren(component._renderedComponent, visitor)\n  } else if (component._renderedChildren) {\n    component._renderedChildren.forEach((child) => {\n      visitor(child)\n      if (!child._component) {\n        visitNonCompositeChildren(child, visitor)\n      }\n    })\n  }\n}\n\n/**\n * Create a bridge between the Nerv component tree and React's dev tools\n * and register it.\n *\n * After this function is called, the React Dev Tools should be able to detect\n * \"React\" on the page and show the component tree.\n *\n * This function hooks into Nerv VNode creation in order to expose functional\n * components correctly, so it should be called before the root component(s)\n * are rendered.\n *\n * Returns a cleanup function which unregisters the hooks.\n */\nexport function initDevTools () {\n  if (typeof window['__REACT_DEVTOOLS_GLOBAL_HOOK__'] === 'undefined') {\n    // React DevTools are not installed\n    return\n  }\n\n  // Notify devtools when Nerv components are mounted, updated or unmounted\n  const bridge = createDevToolsBridge()\n\n  const nextAfterMount = options.afterMount\n  options.afterMount = (component) => {\n    bridge.componentAdded(component)\n    if (nextAfterMount) {\n      nextAfterMount(component)\n    }\n  }\n\n  const nextAfterUpdate = options.afterUpdate\n  options.afterUpdate = (component) => {\n    bridge.componentUpdated(component)\n    if (nextAfterUpdate) {\n      nextAfterUpdate(component)\n    }\n  }\n\n  const nextBeforeUnmount = options.beforeUnmount\n  options.beforeUnmount = (component) => {\n    bridge.componentRemoved(component)\n    if (nextBeforeUnmount) {\n      nextBeforeUnmount(component)\n    }\n  }\n\n  // Notify devtools about this instance of \"React\"\n  window['__REACT_DEVTOOLS_GLOBAL_HOOK__'].inject(bridge)\n  return () => {\n    options.afterMount = nextAfterMount\n    options.afterUpdate = nextAfterUpdate\n    options.beforeUnmount = nextBeforeUnmount\n  }\n}\n","import { initDevTools } from './devtools'\ninitDevTools()\n"],"names":[],"mappings":"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"}